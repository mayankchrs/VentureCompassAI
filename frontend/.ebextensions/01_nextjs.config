option_settings:
  # EC2 Instance Configuration (Free Tier)
  aws:autoscaling:launchconfiguration:
    InstanceType: t2.micro
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
  
  # Auto Scaling Configuration
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 1
  
  # Environment Configuration
  aws:elasticbeanstalk:environment:
    EnvironmentType: SingleInstance
  
  # Health Monitoring (Basic for cost optimization)
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: basic
  
  # Node.js Platform Configuration (Amazon Linux 2023)
  aws:elasticbeanstalk:container:nodejs:
    ProxyServer: nginx
  
  # Environment Variables for Frontend-Backend Communication
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    NEXT_PUBLIC_API_BASE_URL: <your-backend-url>
    NEXT_PUBLIC_ENVIRONMENT: "production"
    NEXT_TELEMETRY_DISABLED: "1"
    NODE_OPTIONS: "--max-old-space-size=900"

container_commands:
  01_install_dependencies:
    command: "npm ci --production=false"
  
  02_build_nextjs:
    command: "npm run build"